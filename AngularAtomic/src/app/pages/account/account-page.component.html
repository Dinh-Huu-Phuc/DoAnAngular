<section class="mx-auto max-w-xl space-y-6">
  <header class="space-y-1">
    <h1 class="text-2xl font-semibold text-slate-50 sm:text-3xl">
      Thông tin tài khoản
    </h1>
    <p class="text-xs text-slate-400 sm:text-sm" *ngIf="user(); else guestNotice">
      Cập nhật tên hiển thị, email và số điện thoại của bạn. Thông tin sẽ được lưu về hệ thống.
    </p>
    <ng-template #guestNotice>
      <p class="text-xs text-rose-300 sm:text-sm">
        Bạn chưa đăng nhập. Vui lòng đăng nhập để chỉnh sửa thông tin tài khoản.
      </p>
    </ng-template>
  </header>

  <form
    *ngIf="user()"
    [formGroup]="form"
    (ngSubmit)="submit()"
    class="space-y-4 rounded-2xl border border-slate-800 bg-slate-900/60 p-5 shadow-lg shadow-cyan-500/5"
  >
    <div class="space-y-1.5">
      <label class="text-xs font-medium text-slate-200">
        Tên đăng nhập
      </label>
      <input
        type="text"
        formControlName="username"
        class="w-full cursor-not-allowed rounded-xl border border-slate-800 bg-slate-950/70 px-3 py-2 text-sm text-slate-400 outline-none"
        readonly
      />
    </div>

    <div class="space-y-1.5">
      <label for="fullName" class="text-xs font-medium text-slate-200">
        Họ và tên
      </label>
      <input
        id="fullName"
        type="text"
        formControlName="fullName"
        class="w-full rounded-xl border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-100 outline-none ring-0 placeholder:text-slate-500 focus:border-cyan-400 focus:ring-2 focus:ring-cyan-500/40 transition"
        placeholder="Nhập họ tên"
      />
      <p
        *ngIf="form.controls.fullName.touched && form.controls.fullName.invalid"
        class="text-xs text-rose-400"
      >
        Họ tên tối thiểu 3 ký tự.
      </p>
    </div>

    <div class="space-y-1.5">
      <label for="email" class="text-xs font-medium text-slate-200">
        Email
      </label>
      <input
        id="email"
        type="email"
        formControlName="email"
        class="w-full rounded-xl border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-100 outline-none ring-0 placeholder:text-slate-500 focus:border-cyan-400 focus:ring-2 focus:ring-cyan-500/40 transition"
        placeholder="Nhập email"
      />
      <p
        *ngIf="form.controls.email.touched && form.controls.email.invalid"
        class="text-xs text-rose-400"
      >
        Email không hợp lệ.
      </p>
    </div>

    <div class="space-y-1.5">
      <label for="phoneNumber" class="text-xs font-medium text-slate-200">
        Số điện thoại
      </label>
      <input
        id="phoneNumber"
        type="tel"
        formControlName="phoneNumber"
        class="w-full rounded-xl border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-100 outline-none ring-0 placeholder:text-slate-500 focus:border-cyan-400 focus:ring-2 focus:ring-cyan-500/40 transition"
        placeholder="Nhập số điện thoại"
      />
      <p
        *ngIf="form.controls.phoneNumber.touched && form.controls.phoneNumber.invalid"
        class="text-xs text-rose-400"
      >
        Số điện thoại gồm 9–11 chữ số.
      </p>
    </div>

    <div
      *ngIf="errorMessage"
      class="rounded-xl border border-rose-500/40 bg-rose-500/10 px-3 py-2 text-xs text-rose-200"
    >
      {{ errorMessage }}
    </div>

    <div
      *ngIf="successMessage"
      class="rounded-xl border border-emerald-500/40 bg-emerald-500/10 px-3 py-2 text-xs text-emerald-200"
    >
      {{ successMessage }}
    </div>

    <button
      type="submit"
      [disabled]="saving"
      class="flex w-full items-center justify-center gap-2 rounded-full bg-cyan-500 px-4 py-2 text-sm font-semibold text-slate-950 shadow-md shadow-cyan-500/40 hover:bg-cyan-400 disabled:cursor-not-allowed disabled:opacity-70 transition-colors"
    >
      <span *ngIf="!saving">Lưu thay đổi</span>
      <span *ngIf="saving">Đang lưu...</span>
    </button>
  </form>
</section>



