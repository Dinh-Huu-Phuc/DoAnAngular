<div class="flex min-h-screen items-center justify-center px-4 py-12">
  <section class="relative w-full max-w-xl space-y-6 overflow-hidden rounded-3xl">
    <app-decorative-atom></app-decorative-atom>
    <div class="relative z-10">
  <header class="space-y-1 text-center">
    <p class="text-xs font-semibold uppercase tracking-[0.25em] text-cyan-400">
      Đăng ký
    </p>
    <h1 class="text-2xl font-semibold text-slate-50 sm:text-3xl">
      Tạo tài khoản học Hóa học 3D
    </h1>
    <p class="text-xs text-slate-400 sm:text-sm">
      Điền đầy đủ thông tin bên dưới để bắt đầu hành trình khám phá Hóa học hiện đại.
    </p>
  </header>

  <form
    [formGroup]="form"
    (ngSubmit)="submit()"
    class="group space-y-4 rounded-2xl border border-slate-800 bg-slate-900/80 backdrop-blur-sm p-5 shadow-lg shadow-cyan-500/5 transition-all duration-300 hover:border-cyan-500/50 hover:bg-slate-900/90 hover:shadow-xl hover:shadow-cyan-500/20 hover:scale-[1.01]"
  >
    <div class="grid gap-4 sm:grid-cols-2">
      <div class="space-y-1.5 sm:col-span-2">
        <label for="fullName" class="text-xs font-medium text-slate-200">
          Họ và tên
        </label>
        <input
          id="fullName"
          type="text"
          formControlName="fullName"
          class="w-full rounded-xl border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-100 outline-none ring-0 placeholder:text-slate-500 focus:border-cyan-400 focus:ring-2 focus:ring-cyan-500/40 transition"
          placeholder="vd: Nguyễn Văn A"
        />
        <p
          *ngIf="form.controls.fullName.touched && form.controls.fullName.invalid"
          class="text-xs text-rose-400"
        >
          Vui lòng nhập họ tên (tối thiểu 3 ký tự).
        </p>
      </div>

      <div class="space-y-1.5">
        <label for="username" class="text-xs font-medium text-slate-200">
          Tên đăng nhập
        </label>
        <input
          id="username"
          type="text"
          formControlName="username"
          class="w-full rounded-xl border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-100 outline-none ring-0 placeholder:text-slate-500 focus:border-cyan-400 focus:ring-2 focus:ring-cyan-500/40 transition"
          placeholder="vd: hoahoc123"
        />
        <p
          *ngIf="form.controls.username.touched && form.controls.username.invalid"
          class="text-xs text-rose-400"
        >
          Tên đăng nhập tối thiểu 4 ký tự.
        </p>
      </div>

      <div class="space-y-1.5">
        <label for="email" class="text-xs font-medium text-slate-200">
          Email (Gmail)
        </label>
        <input
          id="email"
          type="email"
          formControlName="email"
          class="w-full rounded-xl border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-100 outline-none ring-0 placeholder:text-slate-500 focus:border-cyan-400 focus:ring-2 focus:ring-cyan-500/40 transition"
          placeholder="vd: tenban@gmail.com"
        />
        <p
          *ngIf="form.controls.email.touched && form.controls.email.invalid"
          class="text-xs text-rose-400"
        >
          Vui lòng nhập email hợp lệ.
        </p>
      </div>

      <div class="space-y-1.5">
        <label for="phoneNumber" class="text-xs font-medium text-slate-200">
          Số điện thoại
        </label>
        <input
          id="phoneNumber"
          type="tel"
          formControlName="phoneNumber"
          class="w-full rounded-xl border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-100 outline-none ring-0 placeholder:text-slate-500 focus:border-cyan-400 focus:ring-2 focus:ring-cyan-500/40 transition"
          placeholder="vd: 0912345678"
        />
        <p
          *ngIf="form.controls.phoneNumber.touched && form.controls.phoneNumber.invalid"
          class="text-xs text-rose-400"
        >
          Số điện thoại gồm 9–11 chữ số.
        </p>
      </div>
    </div>

    <div class="grid gap-4 sm:grid-cols-2">
      <div class="space-y-1.5">
        <label for="password" class="text-xs font-medium text-slate-200">
          Mật khẩu
        </label>
        <input
          id="password"
          type="password"
          formControlName="password"
          class="w-full rounded-xl border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-100 outline-none ring-0 placeholder:text-slate-500 focus:border-cyan-400 focus:ring-2 focus:ring-cyan-500/40 transition"
          placeholder="Tối thiểu 6 ký tự"
        />
        <p
          *ngIf="form.controls.password.touched && form.controls.password.invalid"
          class="text-xs text-rose-400"
        >
          Mật khẩu tối thiểu 6 ký tự.
        </p>
      </div>

      <div class="space-y-1.5">
        <label for="confirmPassword" class="text-xs font-medium text-slate-200">
          Nhập lại mật khẩu
        </label>
        <input
          id="confirmPassword"
          type="password"
          formControlName="confirmPassword"
          class="w-full rounded-xl border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-100 outline-none ring-0 placeholder:text-slate-500 focus:border-cyan-400 focus:ring-2 focus:ring-cyan-500/40 transition"
          placeholder="Nhập lại mật khẩu"
        />
        <p
          *ngIf="form.controls.confirmPassword.touched && form.controls.confirmPassword.invalid"
          class="text-xs text-rose-400"
        >
          Vui lòng nhập lại mật khẩu.
        </p>
      </div>
    </div>

    <!-- Captcha -->
    <div class="space-y-2">
      <label class="text-xs font-medium text-slate-200">
        Xác nhận Captcha
      </label>
      <div class="flex flex-wrap items-center gap-3">
        <div
          class="inline-flex min-w-[140px] items-center justify-center rounded-xl border border-cyan-500/40 bg-gradient-to-r from-slate-900 via-slate-950 to-slate-900 px-4 py-2 text-lg font-mono tracking-[0.35em] text-cyan-300 shadow-inner shadow-cyan-500/20"
        >
          {{ captchaCode }}
        </div>
        <button
          type="button"
          (click)="refreshCaptcha()"
          class="rounded-full border border-slate-700 px-3 py-1.5 text-xs font-medium text-slate-100 hover:border-cyan-400 hover:text-cyan-300 transition-colors"
        >
          Làm mới
        </button>
      </div>
      <input
        type="text"
        formControlName="captcha"
        class="mt-1 w-full rounded-xl border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-100 outline-none ring-0 placeholder:text-slate-500 focus:border-cyan-400 focus:ring-2 focus:ring-cyan-500/40 transition"
        placeholder="Nhập lại mã captcha ở trên"
      />
      <p
        *ngIf="form.controls.captcha.touched && form.controls.captcha.invalid"
        class="text-xs text-rose-400"
      >
        Vui lòng nhập captcha.
      </p>
    </div>

    <div *ngIf="errorMessage" class="rounded-xl border border-rose-500/40 bg-rose-500/10 px-3 py-2 text-xs text-rose-200">
      {{ errorMessage }}
    </div>

    <div *ngIf="successMessage" class="rounded-xl border border-emerald-500/40 bg-emerald-500/10 px-3 py-2 text-xs text-emerald-200">
      {{ successMessage }}
    </div>

    <button
      type="submit"
      [disabled]="loading"
      class="flex w-full items-center justify-center gap-2 rounded-full bg-cyan-500 px-4 py-3 text-sm font-bold text-slate-900 shadow-lg shadow-cyan-500/40 hover:bg-cyan-400 disabled:cursor-not-allowed disabled:opacity-70 transition-all active:scale-95"
    >
      @if (loading) {
        <svg class="h-5 w-5 animate-spin text-slate-900" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
        <span>Đang xử lý...</span>
      } @else {
        <span>Đăng ký</span>
      }
    </button>

    <p class="text-center text-xs text-slate-400">
      Đã có tài khoản?
      <a routerLink="/login" class="font-medium text-cyan-400 hover:text-cyan-300">
        Đăng nhập
      </a>
    </p>
  </form>
    </div>
  </section>
</div>


